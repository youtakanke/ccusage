# CCUsage GUI Enhanced Edition

CCUsage の美しいmacOS用GUIアプリケーションです。ライブモニタリングと各種レポート機能を直感的なインターフェースで利用できます。

## ✨ 新機能・改良点

### 🎨 UI/UX改良
- **ASCIIテーブルをHTMLテーブルに自動変換**: 生の出力を美しく整形
- **JSON出力をデフォルト**: 表形式での見やすい表示
- **日付ピッカー**: カレンダーアイコン付きの使いやすい日付選択
- **レスポンシブデザイン**: スクロール問題を解決、画面内に収まる最適化

### 📊 ライブモニタリング強化
- **コンパクトダッシュボード**: 画面内に収まる450px高制限の専用レイアウト
- **進捗バー**: セッション進行度、トークン使用率、コスト進行度を横棒グラフで表示
- **燃焼率インジケーター**: 使用速度に応じた色分け（Normal/Moderate/High）
- **簡潔なインターフェース**: ライブモニタリング時は不要なオプションを非表示
- **自動スクロール無効化**: 重要な情報を見逃さない固定表示

### 📋 テーブル表示機能
- **モデル別内訳対応**: JSON出力時のモデル詳細表示
- **ズーム機能**: テーブル以外の出力に対応した拡大縮小
- **Raw出力切り替え**: JSONチェックを外すと元のコンソール出力を表示

## 🎯 主な機能

### 📊 レポート機能

- **日次レポート**: Claude Codeの日次トークン使用量とコスト
- **月次レポート**: 月次集計レポート
- **セッション別レポート**: 会話セッション別の使用量
- **ブロック別レポート**: 5時間の請求ウィンドウ別の使用量

### 📡 ライブモニタリング

- **アクティブセッション監視**: 現在の使用状況をリアルタイム表示
- **進捗可視化**: セッション時間、トークン、コストの進行状況を進捗バーで表示
- **燃焼率分析**: 使用速度の警告システム
- **予測機能**: 現在のペースでの最終予測値を表示

### ⚙️ 便利なオプション

- **日付ピッカー**: 視覚的な日付選択（YYYY-MM-DD形式）
- **JSON出力**: デフォルトで美しいテーブル表示
- **モデル別内訳**: 使用モデルの詳細分析

## 🚀 使用方法

### 1. アプリケーションの起動

#### 開発モード

```bash
npm run gui:dev
```

#### 本番モード

```bash
npm run gui
```

### 2. インターフェースの使い方

1. **サイドバーから機能を選択**

   - 📊 日次レポート
   - 📈 月次レポート
   - 💬 セッション別
   - 🧱 ブロック別
   - 📡 ライブモニタリング

2. **オプションを設定**

   - 日付ピッカーで開始日・終了日を選択（カレンダーアイコンをクリック）
   - JSON出力（デフォルト有効）やモデル別内訳をチェックボックスで選択

3. **実行ボタンをクリック**
   - 通常レポート: 「実行」ボタン
   - ライブモニタリング: 「ライブ開始」ボタン（オプションは自動非表示）

### 3. ライブモニタリングの使用方法

1. サイドバーから「📡 ライブモニタリング」を選択
2. 「ライブ開始」ボタンをクリック（他のオプションは自動的に非表示）
3. **コンパクトダッシュボード**でリアルタイム監視:
   - セッション進行度の進捗バー
   - トークン使用量の進捗バー
   - コスト進行度の進捗バー
   - 燃焼率インジケーター（色分け）
   - 予測統計情報
4. 停止するには「停止」ボタンをクリック

## 📦 ビルドとパッケージング

### 開発用パッケージ

```bash
npm run gui:pack
```

### 配布用DMGファイル作成

```bash
npm run gui:build
```

作成されるファイル:

- `dist-electron/CCUsage-15.1.0.dmg` (Intel Mac用)
- `dist-electron/CCUsage-15.1.0-arm64.dmg` (Apple Silicon Mac用)

## 🎨 デザイン特徴

- **macOSネイティブ**: macOSの設計ガイドラインに準拠
- **モダンUI**: グラデーション背景とガラスモーフィズム効果
- **レスポンシブ**: ウィンドウサイズに応じて最適化、スクロール問題解決
- **ダークテーマ**: ターミナル出力用のダークテーマ
- **アニメーション**: スムーズなトランジション効果
- **HTML Table**: ASCIIテーブルを美しいHTML表に自動変換
- **進捗可視化**: 横棒グラフによる直感的な進行状況表示
- **コンパクト設計**: 画面スペースを効率的に活用

## 🔧 技術仕様

- **フレームワーク**: Electron
- **UI**: HTML5 + CSS3 + JavaScript
- **アーキテクチャ**: メインプロセス + レンダラープロセス
- **IPC通信**: Electronの`ipcMain`/`ipcRenderer`を使用
- **対応OS**: macOS (Intel & Apple Silicon)

## 📝 開発者向け情報

### ファイル構成

```
gui/
├── main.cjs              # Electronメインプロセス（CommonJS）
├── index.html            # UIレイアウト（カレンダーアイコン、進捗バー含む）
├── renderer.cjs          # 旧レンダラープロセス
└── renderer_simple.cjs   # 改良版レンダラープロセス（ASCIIテーブル変換、ライブダッシュボード）
```

### 主要なIPC通信

- `run-daily`: 日次レポート実行
- `run-monthly`: 月次レポート実行
- `run-session`: セッション別レポート実行
- `run-blocks`: ブロック別レポート実行
- `run-blocks-live`: ライブモニタリング実行

## 🐛 トラブルシューティング

### アプリが起動しない場合

1. 必要な依存関係がインストールされているか確認
2. `npm run build`でCLIツールがビルドされているか確認
3. macOSのセキュリティ設定を確認

### データが表示されない場合

1. Claude Codeの使用履歴ファイルが存在するか確認
2. ファイルの権限を確認
3. コンソールでエラーメッセージを確認（開発者ツール）

## 🎉 完了した改良点

- [x] **ASCIIテーブル → HTMLテーブル変換**: 美しい表形式表示
- [x] **ライブモニタリング強化**: コンパクトダッシュボード + 進捗バー
- [x] **日付ピッカー**: カレンダーアイコン付きの直感的な日付選択
- [x] **レスポンシブ改良**: スクロール問題解決、画面最適化
- [x] **UI/UX改善**: 不要なオプション非表示、中央揃え調整
- [x] **JSON出力デフォルト**: 表形式での見やすい表示

## 🚀 今後の予定

- [ ] 設定画面の追加
- [ ] テーマカスタマイズ機能
- [ ] エクスポート機能の強化（CSV、Excel）
- [ ] 通知機能（使用量警告）
- [ ] より詳細なグラフ表示機能

---

**Enjoy using CCUsage GUI! 🚀**
